

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Title:  .
-----------------------2016-05-09[May-Mon]11-42AM

http://serverfault.com/questions/745464/samba-share-yielding-invalid-handle

I have a strange behavior that came up suddenly with a samba share (arch linux) since yesterday. The only trigger that I can think of is a system update (pacman -Syu). Ever since, the root share (/) is accessible and all directories are visible but any attempt to access any of the directories triggers an "invalid handle" response in Windows. If I however share any of the directories (e.g. /data) as a separate share, it is fully accessible without trouble. Here is the share definition.

This behavior comes with the latest Samba security updates. I just encountered it with Debian Wheezy. It seems that fixing CVE-2015-5252 either intentionally or inadvertently blocks root level shares (/).

As a workaround, you can set in smb.conf
[global]
unix extensions = no
[share]
wide links = yes

Note: unix extension = yes, which is the default, would disable wide links.


_____________





~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
